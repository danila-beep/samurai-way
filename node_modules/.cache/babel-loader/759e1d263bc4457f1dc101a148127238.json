{"ast":null,"code":"import { useCallback, useEffect, useState } from 'react';\nimport { useEventCallback, useEventListener } from '..';\n\nfunction useLocalStorage(key, initialValue) {\n  const readValue = useCallback(() => {\n    if (typeof window === 'undefined') {\n      return initialValue;\n    }\n\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? parseJSON(item) : initialValue;\n    } catch (error) {\n      console.warn(`Error reading localStorage key “${key}”:`, error);\n      return initialValue;\n    }\n  }, [initialValue, key]);\n  const [storedValue, setStoredValue] = useState(readValue);\n  const setValue = useEventCallback(value => {\n    if (typeof window === 'undefined') {\n      console.warn(`Tried setting localStorage key “${key}” even though environment is not a client`);\n    }\n\n    try {\n      const newValue = value instanceof Function ? value(storedValue) : value;\n      window.localStorage.setItem(key, JSON.stringify(newValue));\n      setStoredValue(newValue);\n      window.dispatchEvent(new Event('local-storage'));\n    } catch (error) {\n      console.warn(`Error setting localStorage key “${key}”:`, error);\n    }\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, []);\n  const handleStorageChange = useCallback(event => {\n    if ((event === null || event === void 0 ? void 0 : event.key) && event.key !== key) {\n      return;\n    }\n\n    setStoredValue(readValue());\n  }, [key, readValue]);\n  useEventListener('storage', handleStorageChange);\n  useEventListener('local-storage', handleStorageChange);\n  return [storedValue, setValue];\n}\n\nexport default useLocalStorage;\n\nfunction parseJSON(value) {\n  try {\n    return value === 'undefined' ? undefined : JSON.parse(value !== null && value !== void 0 ? value : '');\n  } catch (_a) {\n    console.log('parsing error on', {\n      value\n    });\n    return undefined;\n  }\n}","map":{"version":3,"sources":["/Users/danilnagovicyn/Desktop/reactprojects/Incubator/Samurai_way/samurai-way/node_modules/usehooks-ts/dist/esm/useLocalStorage/useLocalStorage.js"],"names":["useCallback","useEffect","useState","useEventCallback","useEventListener","useLocalStorage","key","initialValue","readValue","window","item","localStorage","getItem","parseJSON","error","console","warn","storedValue","setStoredValue","setValue","value","newValue","Function","setItem","JSON","stringify","dispatchEvent","Event","handleStorageChange","event","undefined","parse","_a","log"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useState, } from 'react';\nimport { useEventCallback, useEventListener } from '..';\nfunction useLocalStorage(key, initialValue) {\n    const readValue = useCallback(() => {\n        if (typeof window === 'undefined') {\n            return initialValue;\n        }\n        try {\n            const item = window.localStorage.getItem(key);\n            return item ? parseJSON(item) : initialValue;\n        }\n        catch (error) {\n            console.warn(`Error reading localStorage key “${key}”:`, error);\n            return initialValue;\n        }\n    }, [initialValue, key]);\n    const [storedValue, setStoredValue] = useState(readValue);\n    const setValue = useEventCallback(value => {\n        if (typeof window === 'undefined') {\n            console.warn(`Tried setting localStorage key “${key}” even though environment is not a client`);\n        }\n        try {\n            const newValue = value instanceof Function ? value(storedValue) : value;\n            window.localStorage.setItem(key, JSON.stringify(newValue));\n            setStoredValue(newValue);\n            window.dispatchEvent(new Event('local-storage'));\n        }\n        catch (error) {\n            console.warn(`Error setting localStorage key “${key}”:`, error);\n        }\n    });\n    useEffect(() => {\n        setStoredValue(readValue());\n    }, []);\n    const handleStorageChange = useCallback((event) => {\n        if ((event === null || event === void 0 ? void 0 : event.key) && event.key !== key) {\n            return;\n        }\n        setStoredValue(readValue());\n    }, [key, readValue]);\n    useEventListener('storage', handleStorageChange);\n    useEventListener('local-storage', handleStorageChange);\n    return [storedValue, setValue];\n}\nexport default useLocalStorage;\nfunction parseJSON(value) {\n    try {\n        return value === 'undefined' ? undefined : JSON.parse(value !== null && value !== void 0 ? value : '');\n    }\n    catch (_a) {\n        console.log('parsing error on', { value });\n        return undefined;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}