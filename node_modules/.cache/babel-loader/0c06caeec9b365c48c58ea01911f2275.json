{"ast":null,"code":"import { authApi } from \"../../api/socialMediaAPI\";\nconst initialState = {\n  isAuthorized: false,\n  data: {}\n};\nexport const authReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"auth/me\":\n      return { ...state,\n        data: { ...state.data,\n          ...action.data\n        },\n        isAuthorized: true\n      };\n\n    default:\n      return state;\n  }\n};\nexport const meAC = data => {\n  return {\n    type: \"auth/me\",\n    data\n  };\n};\nexport const meTC = () => dispatch => {\n  authApi.me().then(res => {\n    if (res.data.resultCode === 0) {\n      dispatch(meAC(res.data.data));\n    } else {\n      console.log(res.data.messages);\n    }\n  }).catch(err => {\n    console.log(err.message);\n  });\n};","map":{"version":3,"sources":["/Users/danilnagovicyn/Desktop/reactprojects/Incubator/Samurai_way/samurai-way/src/store/reducers/authReducer.ts"],"names":["authApi","initialState","isAuthorized","data","authReducer","state","action","type","meAC","meTC","dispatch","me","then","res","resultCode","console","log","messages","catch","err","message"],"mappings":"AACA,SAASA,OAAT,QAAwB,0BAAxB;AAOA,MAAMC,YAA2B,GAAG;AAClCC,EAAAA,YAAY,EAAE,KADoB;AAElCC,EAAAA,IAAI,EAAE;AAF4B,CAApC;AAKA,OAAO,MAAMC,WAAW,GAAG,YAA+C;AAAA,MAA9CC,KAA8C,uEAAtCJ,YAAsC;AAAA,MAAxBK,MAAwB;;AACxE,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,SAAL;AACE,aAAO,EACL,GAAGF,KADE;AAELF,QAAAA,IAAI,EAAE,EACJ,GAAGE,KAAK,CAACF,IADL;AAEJ,aAAGG,MAAM,CAACH;AAFN,SAFD;AAMLD,QAAAA,YAAY,EAAE;AANT,OAAP;;AASF;AACE,aAAOG,KAAP;AAZJ;AAcD,CAfM;AAiBP,OAAO,MAAMG,IAAI,GAAIL,IAAD,IAId;AACJ,SAAO;AAAEI,IAAAA,IAAI,EAAE,SAAR;AAAmBJ,IAAAA;AAAnB,GAAP;AACD,CANM;AAQP,OAAO,MAAMM,IAAI,GAAG,MAAOC,QAAD,IAAqC;AAC7DV,EAAAA,OAAO,CACJW,EADH,GAEGC,IAFH,CAESC,GAAD,IAAS;AACb,QAAIA,GAAG,CAACV,IAAJ,CAASW,UAAT,KAAwB,CAA5B,EAA+B;AAC7BJ,MAAAA,QAAQ,CAACF,IAAI,CAACK,GAAG,CAACV,IAAJ,CAASA,IAAV,CAAL,CAAR;AACD,KAFD,MAEO;AACLY,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACV,IAAJ,CAASc,QAArB;AACD;AACF,GARH,EASGC,KATH,CASUC,GAAD,IAAS;AACdJ,IAAAA,OAAO,CAACC,GAAR,CAAaG,GAAD,CAA6BC,OAAzC;AACD,GAXH;AAYD,CAbM","sourcesContent":["import { Dispatch } from \"redux\";\nimport { authApi } from \"../../api/socialMediaAPI\";\nimport {\n  SetLoggedUserDataActionType,\n  getLoggedUserDataTC,\n  setLoggedUserDataAC,\n} from \"./appReducer\";\n\nconst initialState: authStateType = {\n  isAuthorized: false,\n  data: {},\n};\n\nexport const authReducer = (state = initialState, action: ActionsType) => {\n  switch (action.type) {\n    case \"auth/me\":\n      return {\n        ...state,\n        data: {\n          ...state.data,\n          ...action.data,\n        },\n        isAuthorized: true,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const meAC = (data: {\n  userId: number;\n  email: string;\n  login: string;\n}) => {\n  return { type: \"auth/me\", data } as const;\n};\n\nexport const meTC = () => (dispatch: Dispatch<ActionsType>) => {\n  authApi\n    .me()\n    .then((res) => {\n      if (res.data.resultCode === 0) {\n        dispatch(meAC(res.data.data));\n      } else {\n        console.log(res.data.messages);\n      }\n    })\n    .catch((err) => {\n      console.log((err as { message: string }).message);\n    });\n};\n\nexport type authStateType = {\n  isAuthorized: boolean;\n  data: {\n    id?: number;\n    email?: string;\n    login?: string;\n  };\n};\n\ntype MeActionType = ReturnType<typeof meAC>;\n\ntype ActionsType = MeActionType\n"]},"metadata":{},"sourceType":"module"}