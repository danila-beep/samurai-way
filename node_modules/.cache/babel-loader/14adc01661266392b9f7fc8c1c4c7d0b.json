{"ast":null,"code":"import { authApi } from \"../../api/socialMediaAPI\";\nconst initialState = {\n  isAuthorized: false,\n  data: {}\n};\nexport const authReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"auth/me\":\n      return { ...state,\n        data: { ...state.data,\n          ...action.data\n        },\n        isAuthorized: true\n      };\n\n    case \"auth/login\":\n      {\n        return { ...state,\n          isAuthorized: action.isAuthorized\n        };\n      }\n\n    case \"auth/logout\":\n      {\n        return { ...state,\n          isAuthorized: action.isAuthorized\n        };\n      }\n\n    default:\n      return state;\n  }\n};\nexport const meAC = data => {\n  return {\n    type: \"auth/me\",\n    data\n  };\n};\nexport const loginAC = () => {\n  return {\n    type: \"auth/login\",\n    isAuthorized: true\n  };\n};\nexport const logoutAC = () => {\n  return {\n    type: \"auth/logout\",\n    isAuthorized: false\n  };\n};\nexport const meTC = () => dispatch => {\n  authApi.me().then(res => {\n    if (res.data.resultCode === 0) {\n      dispatch(meAC(res.data.data));\n    } else {\n      console.log(res.data.messages);\n    }\n  }).catch(err => {\n    console.log(err.message);\n  });\n};\nexport const loginTC = data => dispatch => {\n  authApi.login(data).then(res => {\n    if (res.data.resultCode === 0) {\n      dispatch(loginAC());\n    } else {\n      console.log(res.data.messages);\n    }\n  }).catch(err => {\n    console.log(err.message);\n  });\n};\nexport const logoutTC = () => dispatch => {\n  authApi.logout().then(res => {\n    dispatch(logoutAC());\n  });\n};","map":{"version":3,"sources":["/Users/danilnagovicyn/Desktop/reactprojects/Incubator/Samurai_way/samurai-way/src/store/reducers/authReducer.ts"],"names":["authApi","initialState","isAuthorized","data","authReducer","state","action","type","meAC","loginAC","logoutAC","meTC","dispatch","me","then","res","resultCode","console","log","messages","catch","err","message","loginTC","login","logoutTC","logout"],"mappings":"AACA,SAEEA,OAFF,QAIO,0BAJP;AAWA,MAAMC,YAA2B,GAAG;AAClCC,EAAAA,YAAY,EAAE,KADoB;AAElCC,EAAAA,IAAI,EAAE;AAF4B,CAApC;AAKA,OAAO,MAAMC,WAAW,GAAG,YAA+C;AAAA,MAA9CC,KAA8C,uEAAtCJ,YAAsC;AAAA,MAAxBK,MAAwB;;AACxE,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,SAAL;AACE,aAAO,EACL,GAAGF,KADE;AAELF,QAAAA,IAAI,EAAE,EACJ,GAAGE,KAAK,CAACF,IADL;AAEJ,aAAGG,MAAM,CAACH;AAFN,SAFD;AAMLD,QAAAA,YAAY,EAAE;AANT,OAAP;;AAQF,SAAK,YAAL;AAAmB;AACjB,eAAO,EACL,GAAGG,KADE;AAELH,UAAAA,YAAY,EAAEI,MAAM,CAACJ;AAFhB,SAAP;AAID;;AACD,SAAK,aAAL;AAAoB;AAClB,eAAO,EACL,GAAGG,KADE;AAELH,UAAAA,YAAY,EAAEI,MAAM,CAACJ;AAFhB,SAAP;AAID;;AAED;AACE,aAAOG,KAAP;AAxBJ;AA0BD,CA3BM;AA6BP,OAAO,MAAMG,IAAI,GAAIL,IAAD,IAId;AACJ,SAAO;AAAEI,IAAAA,IAAI,EAAE,SAAR;AAAmBJ,IAAAA;AAAnB,GAAP;AACD,CANM;AAOP,OAAO,MAAMM,OAAO,GAAG,MAAM;AAC3B,SAAO;AAAEF,IAAAA,IAAI,EAAE,YAAR;AAAsBL,IAAAA,YAAY,EAAE;AAApC,GAAP;AACD,CAFM;AAGP,OAAO,MAAMQ,QAAQ,GAAG,MAAM;AAC5B,SAAO;AAAEH,IAAAA,IAAI,EAAE,aAAR;AAAuBL,IAAAA,YAAY,EAAE;AAArC,GAAP;AACD,CAFM;AAIP,OAAO,MAAMS,IAAI,GAAG,MAAOC,QAAD,IAAqC;AAC7DZ,EAAAA,OAAO,CACJa,EADH,GAEGC,IAFH,CAESC,GAAD,IAAS;AACb,QAAIA,GAAG,CAACZ,IAAJ,CAASa,UAAT,KAAwB,CAA5B,EAA+B;AAC7BJ,MAAAA,QAAQ,CAACJ,IAAI,CAACO,GAAG,CAACZ,IAAJ,CAASA,IAAV,CAAL,CAAR;AACD,KAFD,MAEO;AACLc,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACZ,IAAJ,CAASgB,QAArB;AACD;AACF,GARH,EASGC,KATH,CASUC,GAAD,IAAS;AACdJ,IAAAA,OAAO,CAACC,GAAR,CAAaG,GAAD,CAA6BC,OAAzC;AACD,GAXH;AAYD,CAbM;AAeP,OAAO,MAAMC,OAAO,GAAIpB,IAAD,IAA0BS,QAAD,IAAwB;AACtEZ,EAAAA,OAAO,CACJwB,KADH,CACSrB,IADT,EAEGW,IAFH,CAESC,GAAD,IAAS;AACb,QAAIA,GAAG,CAACZ,IAAJ,CAASa,UAAT,KAAwB,CAA5B,EAA+B;AAC7BJ,MAAAA,QAAQ,CAACH,OAAO,EAAR,CAAR;AACD,KAFD,MAEO;AACLQ,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACZ,IAAJ,CAASgB,QAArB;AACD;AACF,GARH,EASGC,KATH,CASUC,GAAD,IAAS;AACdJ,IAAAA,OAAO,CAACC,GAAR,CAAaG,GAAD,CAA6BC,OAAzC;AACD,GAXH;AAYD,CAbM;AAcP,OAAO,MAAMG,QAAQ,GAAG,MAAOb,QAAD,IAAwB;AACpDZ,EAAAA,OAAO,CAAC0B,MAAR,GAAiBZ,IAAjB,CAAuBC,GAAD,IAAS;AAC7BH,IAAAA,QAAQ,CAACF,QAAQ,EAAT,CAAR;AACD,GAFD;AAGD,CAJM","sourcesContent":["import { Dispatch } from \"redux\";\nimport {\n  LoginDataType,\n  authApi,\n  socialMediaAPI,\n} from \"../../api/socialMediaAPI\";\nimport {\n  SetLoggedUserDataActionType,\n  getLoggedUserDataTC,\n  setLoggedUserDataAC,\n} from \"./appReducer\";\n\nconst initialState: authStateType = {\n  isAuthorized: false,\n  data: {},\n};\n\nexport const authReducer = (state = initialState, action: ActionsType) => {\n  switch (action.type) {\n    case \"auth/me\":\n      return {\n        ...state,\n        data: {\n          ...state.data,\n          ...action.data,\n        },\n        isAuthorized: true,\n      };\n    case \"auth/login\": {\n      return {\n        ...state,\n        isAuthorized: action.isAuthorized,\n      };\n    }\n    case \"auth/logout\": {\n      return {\n        ...state,\n        isAuthorized: action.isAuthorized,\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n\nexport const meAC = (data: {\n  userId: number;\n  email: string;\n  login: string;\n}) => {\n  return { type: \"auth/me\", data } as const;\n};\nexport const loginAC = () => {\n  return { type: \"auth/login\", isAuthorized: true } as const;\n};\nexport const logoutAC = () => {\n  return { type: \"auth/logout\", isAuthorized: false } as const;\n};\n\nexport const meTC = () => (dispatch: Dispatch<ActionsType>) => {\n  authApi\n    .me()\n    .then((res) => {\n      if (res.data.resultCode === 0) {\n        dispatch(meAC(res.data.data));\n      } else {\n        console.log(res.data.messages);\n      }\n    })\n    .catch((err) => {\n      console.log((err as { message: string }).message);\n    });\n};\n\nexport const loginTC = (data: LoginDataType) => (dispatch: Dispatch) => {\n  authApi\n    .login(data)\n    .then((res) => {\n      if (res.data.resultCode === 0) {\n        dispatch(loginAC());\n      } else {\n        console.log(res.data.messages);\n      }\n    })\n    .catch((err) => {\n      console.log((err as { message: string }).message);\n    });\n};\nexport const logoutTC = () => (dispatch: Dispatch) => {\n  authApi.logout().then((res) => {\n    dispatch(logoutAC());\n  });\n};\n\nexport type authStateType = {\n  isAuthorized: boolean;\n  data: {\n    id?: number;\n    email?: string;\n    login?: string;\n  };\n};\n\ntype MeActionType = ReturnType<typeof meAC>;\ntype LoginActionType = ReturnType<typeof loginAC>;\ntype LogoutActionType = ReturnType<typeof logoutAC>;\n\ntype ActionsType = MeActionType | LoginActionType | LogoutActionType;\n"]},"metadata":{},"sourceType":"module"}