{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport IconCalendar from '@rsuite/icons/legacy/Calendar';\nimport isNil from 'lodash/isNil';\nimport omit from 'lodash/omit';\nimport partial from 'lodash/partial';\nimport pick from 'lodash/pick';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { FormattedDate } from '../CustomProvider';\nimport Toolbar from '../DatePicker/Toolbar';\nimport PredefinedRanges from '../DatePicker/PredefinedRanges';\nimport Stack from '../Stack';\nimport { omitTriggerPropKeys, PickerOverlay, pickerPropTypes, PickerToggle, PickerToggleTrigger, pickTriggerPropKeys, usePickerClassName, usePublicMethods, useToggleKeyDownEvent } from '../Picker';\nimport { createChainedFunction, DATERANGE_DISABLED_TARGET, DateUtils, mergeRefs, useClassNames, useControlled, useCustom } from '../utils';\nimport { addMonths, compareAsc, isSameMonth, startOfDay, endOfDay, shouldRenderTime, isAfter, copyTime, reverseDateRangeOmitTime, getReversedTimeMeridian } from '../utils/dateUtils';\nimport Calendar from './Calendar';\nimport * as disabledDateUtils from './disabledDateUtils';\nimport { getSafeCalendarDate, getMonthHoverRange, getWeekHoverRange, isSameRange } from './utils';\nimport { deprecatePropTypeNew } from '../utils/deprecatePropType';\nimport DateRangePickerContext from './DateRangePickerContext';\nvar DateRangePicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _ref, _ref2, _merge;\n\n  var _props$as = props.as,\n      Component = _props$as === void 0 ? 'div' : _props$as,\n      _props$classPrefix = props.classPrefix,\n      classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n      className = props.className,\n      _props$appearance = props.appearance,\n      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n      _props$editable = props.editable,\n      editable = _props$editable === void 0 ? true : _props$editable,\n      _props$cleanable = props.cleanable,\n      cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n      _props$character = props.character,\n      character = _props$character === void 0 ? ' ~ ' : _props$character,\n      defaultCalendarValue = props.defaultCalendarValue,\n      defaultValue = props.defaultValue,\n      disabled = props.disabled,\n      DEPRECATED_disabledDateProp = props.disabledDate,\n      shouldDisableDate = props.shouldDisableDate,\n      _props$format = props.format,\n      formatStr = _props$format === void 0 ? 'yyyy-MM-dd' : _props$format,\n      hoverRange = props.hoverRange,\n      _props$isoWeek = props.isoWeek,\n      isoWeek = _props$isoWeek === void 0 ? false : _props$isoWeek,\n      _props$limitEndYear = props.limitEndYear,\n      limitEndYear = _props$limitEndYear === void 0 ? 1000 : _props$limitEndYear,\n      limitStartYear = props.limitStartYear,\n      overrideLocale = props.locale,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      oneTap = props.oneTap,\n      _props$placeholder = props.placeholder,\n      placeholder = _props$placeholder === void 0 ? '' : _props$placeholder,\n      _props$placement = props.placement,\n      placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n      ranges = props.ranges,\n      renderValue = props.renderValue,\n      _props$showOneCalenda = props.showOneCalendar,\n      showOneCalendar = _props$showOneCalenda === void 0 ? false : _props$showOneCalenda,\n      showWeekNumbers = props.showWeekNumbers,\n      showMeridian = props.showMeridian,\n      style = props.style,\n      toggleAs = props.toggleAs,\n      caretAs = props.caretAs,\n      valueProp = props.value,\n      onChange = props.onChange,\n      onClean = props.onClean,\n      onClose = props.onClose,\n      onEnter = props.onEnter,\n      onEntered = props.onEntered,\n      onExited = props.onExited,\n      onOk = props.onOk,\n      onOpen = props.onOpen,\n      onSelect = props.onSelect,\n      renderTitle = props.renderTitle,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"classPrefix\", \"className\", \"appearance\", \"editable\", \"cleanable\", \"character\", \"defaultCalendarValue\", \"defaultValue\", \"disabled\", \"disabledDate\", \"shouldDisableDate\", \"format\", \"hoverRange\", \"isoWeek\", \"limitEndYear\", \"limitStartYear\", \"locale\", \"menuClassName\", \"menuStyle\", \"oneTap\", \"placeholder\", \"placement\", \"ranges\", \"renderValue\", \"showOneCalendar\", \"showWeekNumbers\", \"showMeridian\", \"style\", \"toggleAs\", \"caretAs\", \"value\", \"onChange\", \"onClean\", \"onClose\", \"onEnter\", \"onEntered\", \"onExited\", \"onOk\", \"onOpen\", \"onSelect\", \"renderTitle\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      merge = _useClassNames.merge,\n      prefix = _useClassNames.prefix;\n\n  var _useCustom = useCustom('DateRangePicker', overrideLocale),\n      locale = _useCustom.locale,\n      formatDate = _useCustom.formatDate,\n      parseDate = _useCustom.parseDate;\n\n  var rangeFormatStr = \"\" + formatStr + character + formatStr;\n\n  var _useControlled = useControlled(valueProp, defaultValue !== null && defaultValue !== void 0 ? defaultValue : null),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n  /**\n   * Whether to complete the selection.\n   * Everytime selection will change this value. If the value is false, it means that the selection has not been completed.\n   *\n   * In `oneTap` mode, select action will not change this value, its value should be true always.\n   */\n\n\n  var _useState = useState(true),\n      isSelectedIdle = _useState[0],\n      setSelectedIdle = _useState[1];\n  /**\n   * The currently selected date range.\n   *\n   * The time range is selected by two clicks. After the first click,\n   * the cursor will store a temporary event date in the process until\n   * the second click to determine the end date of the date range.\n   *\n   */\n\n\n  var _useState2 = useState((_ref = valueProp !== null && valueProp !== void 0 ? valueProp : defaultValue) !== null && _ref !== void 0 ? _ref : []),\n      selectedDates = _useState2[0],\n      setSelectedDates = _useState2[1]; // The date of the current hover, used to reduce the calculation of `handleMouseMove`\n\n\n  var _useState3 = useState(null),\n      hoverDateRange = _useState3[0],\n      setHoverDateRange = _useState3[1]; // The displayed calendar panel is rendered based on this value.\n\n\n  var _useState4 = useState(getSafeCalendarDate({\n    value: (_ref2 = value !== null && value !== void 0 ? value : defaultCalendarValue) !== null && _ref2 !== void 0 ? _ref2 : null\n  })),\n      calendarDate = _useState4[0],\n      setCalendarDate = _useState4[1];\n\n  var _useState5 = useState(),\n      inputState = _useState5[0],\n      setInputState = _useState5[1];\n  /**\n   * When hoverRange is set, `selectValue` will be updated during the hover process,\n   * which will cause the `selectValue` to be updated after the first click,\n   * so declare a Ref to temporarily store the `selectValue` of the first click.\n   */\n\n\n  var selectRangeValueRef = useRef(null);\n  /**\n   * Get the time on the calendar.\n   */\n\n  var getCalendarDatetime = useCallback(function (calendarKey) {\n    var index = calendarKey === 'start' ? 0 : 1;\n    return (calendarDate === null || calendarDate === void 0 ? void 0 : calendarDate[index]) || (defaultCalendarValue === null || defaultCalendarValue === void 0 ? void 0 : defaultCalendarValue[index]);\n  }, [calendarDate, defaultCalendarValue]);\n  /**\n   * Call this function to update the calendar panel rendering benchmark value.\n   * If params `value` is not passed, it defaults to [new Date(), addMonth(new Date(), 1)].\n   */\n\n  var updateCalendarDateRange = useCallback(function (_ref3) {\n    var dateRange = _ref3.dateRange,\n        calendarKey = _ref3.calendarKey,\n        eventName = _ref3.eventName;\n    var nextValue = dateRange; // The time should remain the same when the dates in the date range are changed.\n\n    if (shouldRenderTime(formatStr) && dateRange !== null && dateRange !== void 0 && dateRange.length && eventName !== 'changeTime') {\n      var _startDate = copyTime({\n        from: getCalendarDatetime('start'),\n        to: dateRange[0]\n      });\n\n      var _endDate = copyTime({\n        from: getCalendarDatetime('end'),\n        to: dateRange.length === 1 ? addMonths(_startDate, 1) : dateRange[1]\n      });\n\n      nextValue = [_startDate, _endDate];\n    } else if (dateRange === null && typeof defaultCalendarValue !== 'undefined') {\n      // Make the calendar render the value of defaultCalendarValue after clearing the value.\n      nextValue = defaultCalendarValue;\n    }\n\n    setCalendarDate(getSafeCalendarDate({\n      value: nextValue,\n      calendarKey: calendarKey\n    }));\n  }, [formatStr, defaultCalendarValue, getCalendarDatetime]); // if valueProp changed then update selectValue/hoverValue\n\n  useEffect(function () {\n    setSelectedDates(valueProp !== null && valueProp !== void 0 ? valueProp : []);\n    setHoverDateRange(valueProp !== null && valueProp !== void 0 ? valueProp : null);\n  }, [valueProp]);\n\n  var _useState6 = useState(false),\n      isPickerToggleActive = _useState6[0],\n      setPickerToggleActive = _useState6[1];\n\n  var rootRef = useRef(null);\n  var overlayRef = useRef(null);\n  var targetRef = useRef(null);\n  var triggerRef = useRef(null);\n  var handleCloseDropdown = useCallback(function () {\n    var _triggerRef$current, _triggerRef$current$c;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n  }, []);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef,\n    rootRef: rootRef\n  });\n  var getDisplayString = useCallback(function (nextValue, isPlaintext) {\n    var _nextValue$, _nextValue$2;\n\n    var startDate = (_nextValue$ = nextValue === null || nextValue === void 0 ? void 0 : nextValue[0]) !== null && _nextValue$ !== void 0 ? _nextValue$ : null;\n    var endDate = (_nextValue$2 = nextValue === null || nextValue === void 0 ? void 0 : nextValue[1]) !== null && _nextValue$2 !== void 0 ? _nextValue$2 : null;\n\n    if (startDate && endDate) {\n      var displayValue = [startDate, endDate].sort(compareAsc);\n\n      if (isPlaintext) {\n        return formatDate(displayValue[0], formatStr) + character + formatDate(displayValue[1], formatStr);\n      }\n\n      return renderValue ? renderValue(displayValue, formatStr) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FormattedDate, {\n        date: displayValue[0],\n        formatStr: formatStr\n      }), character, /*#__PURE__*/React.createElement(FormattedDate, {\n        date: displayValue[1],\n        formatStr: formatStr\n      }));\n    }\n\n    return isPlaintext ? '' : placeholder || rangeFormatStr;\n  }, [character, formatDate, formatStr, placeholder, rangeFormatStr, renderValue]);\n  /**\n   * preset hover range\n   */\n\n  var getHoverRangeValue = useCallback(function (date) {\n    function getHoverRangeFunc() {\n      if (hoverRange === 'week') {\n        return partial(getWeekHoverRange, isoWeek);\n      } else if (hoverRange === 'month') {\n        return getMonthHoverRange;\n      }\n\n      return hoverRange;\n    }\n\n    var hoverRangeFunc = getHoverRangeFunc();\n\n    if (isNil(hoverRangeFunc)) {\n      return null;\n    }\n\n    var hoverValues = hoverRangeFunc(date);\n    var isHoverRangeValid = hoverValues instanceof Array && hoverValues.length === 2;\n\n    if (!isHoverRangeValid) {\n      return null;\n    }\n\n    if (isAfter(hoverValues[0], hoverValues[1])) {\n      hoverValues = reverseDateRangeOmitTime(hoverValues);\n    }\n\n    return hoverValues;\n  }, [hoverRange, isoWeek]);\n  var handleValueUpdate = useCallback(function (event, nextValue, closeOverlay) {\n    if (closeOverlay === void 0) {\n      closeOverlay = true;\n    } // If nextValue is null, it means that the user is erasing the selected dates.\n\n\n    setSelectedDates(nextValue !== null && nextValue !== void 0 ? nextValue : []);\n\n    if (!isSameRange(nextValue, value, formatStr)) {\n      setValue(nextValue);\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    } // `closeOverlay` default value is `true`\n\n\n    if (closeOverlay !== false) {\n      handleCloseDropdown();\n    }\n  }, [formatStr, handleCloseDropdown, onChange, setValue, value]);\n  /**\n   * Select the date range. If oneTap is not set, you need to click twice to select the start time and end time.\n   * The MouseMove event is called between the first click and the second click to update the selection state.\n   */\n\n  var handleMouseMove = useCallback(function (date) {\n    var nextHoverDateRange = getHoverRangeValue(date); // If hasDoneSelect is false,\n    // it means there's already one selected date\n    // and waiting for user to select the second date to complete the selection.\n\n    if (!isSelectedIdle) {\n      // If `hoverRange` is set, you need to change the value of hoverDateRange according to the rules\n      if (!isNil(nextHoverDateRange) && !isNil(selectRangeValueRef.current)) {\n        var nextSelectedDates = [selectRangeValueRef.current[0], nextHoverDateRange[1]];\n\n        if (DateUtils.isBefore(nextHoverDateRange[0], selectRangeValueRef.current[0])) {\n          nextSelectedDates = [nextHoverDateRange[0], selectRangeValueRef.current[1]];\n        }\n\n        setSelectedDates(nextSelectedDates);\n      } else {\n        setHoverDateRange(function (prevHoverValue) {\n          return isNil(prevHoverValue) ? null : [prevHoverValue[0], date];\n        });\n      } // Before the first click, if nextHoverDateRange has a value, hoverDateRange needs to be updated\n\n    } else if (!isNil(nextHoverDateRange)) {\n      setHoverDateRange(nextHoverDateRange);\n    }\n  }, [getHoverRangeValue, isSelectedIdle]);\n  /**\n   * Callback for selecting a date cell in the calendar grid\n   */\n\n  var handleSelectDate = useCallback(function (index, date, event) {\n    var calendarKey = index === 0 ? 'start' : 'end';\n    var nextSelectDates = hoverDateRange !== null && hoverDateRange !== void 0 ? hoverDateRange : [];\n    var hoverRangeValue = getHoverRangeValue(date);\n    var noHoverRangeValid = isNil(hoverRangeValue); // in `oneTap` mode\n\n    if (isSelectedIdle && oneTap) {\n      handleValueUpdate(event, noHoverRangeValid ? [startOfDay(date), endOfDay(date)] : hoverRangeValue);\n      setSelectedIdle(false);\n      return;\n    } // no preset hover range can use\n\n\n    if (noHoverRangeValid) {\n      // start select\n      if (isSelectedIdle) {\n        nextSelectDates = [date];\n      } else {\n        // finish select\n        nextSelectDates[1] = date;\n      }\n    } else {\n      if (!isSelectedIdle) {\n        nextSelectDates = selectedDates;\n        selectRangeValueRef.current = null;\n      } else {\n        nextSelectDates = hoverRangeValue;\n        selectRangeValueRef.current = hoverRangeValue;\n      }\n    }\n\n    if (nextSelectDates.length === 2) {\n      // If user have completed the selection, then sort the selected dates.\n      if (isAfter(nextSelectDates[0], nextSelectDates[1])) {\n        nextSelectDates = reverseDateRangeOmitTime(nextSelectDates);\n      }\n\n      if (shouldRenderTime(formatStr)) {\n        nextSelectDates = [copyTime({\n          from: getCalendarDatetime('start'),\n          to: nextSelectDates[0]\n        }), copyTime({\n          from: getCalendarDatetime('end'),\n          to: nextSelectDates[1]\n        })];\n      }\n\n      setHoverDateRange(nextSelectDates);\n    } else {\n      setHoverDateRange([nextSelectDates[0], nextSelectDates[0]]);\n    }\n\n    setSelectedDates(nextSelectDates);\n    updateCalendarDateRange({\n      dateRange: nextSelectDates,\n      calendarKey: calendarKey,\n      eventName: 'changeDate'\n    });\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(date, event);\n    setSelectedIdle(!isSelectedIdle);\n  }, [formatStr, getCalendarDatetime, getHoverRangeValue, handleValueUpdate, hoverDateRange, isSelectedIdle, onSelect, oneTap, selectedDates, updateCalendarDateRange]);\n  /**\n   * If `selectValue` changed, there will be the following effects.\n   * 1. Check if the selection is completed.\n   * 2. if the selection is completed, set the temporary `hoverValue` empty.\n   */\n\n  useEffect(function () {\n    var selectValueLength = selectedDates.length;\n    var doneSelected = selectValueLength === 0 || selectValueLength === 2;\n    doneSelected && setHoverDateRange(null);\n  }, [selectedDates]);\n  var updateSingleCalendarMonth = useCallback(function (index, date) {\n    var calendarKey = index === 0 ? 'start' : 'end';\n    var nextCalendarDate = Array.from(calendarDate);\n    nextCalendarDate[index] = date;\n    updateCalendarDateRange({\n      dateRange: nextCalendarDate,\n      calendarKey: calendarKey,\n      eventName: 'changeMonth'\n    });\n  }, [calendarDate, updateCalendarDateRange]);\n  var updateSingleCalendarTime = useCallback(function (index, date) {\n    var calendarKey = index === 0 ? 'start' : 'end';\n    var nextCalendarDate = Array.from(calendarDate);\n    nextCalendarDate[index] = date;\n    updateCalendarDateRange({\n      dateRange: nextCalendarDate,\n      calendarKey: calendarKey,\n      eventName: 'changeTime'\n    });\n    setSelectedDates(function (prev) {\n      var next = [].concat(prev); // if next[index] is not empty, only update the time after aligning the year, month and day\n\n      next[index] = next[index] ? copyTime({\n        from: date,\n        to: next[index]\n      }) : new Date(date.valueOf());\n      return next;\n    });\n  }, [calendarDate, updateCalendarDateRange]);\n  /**\n   * The callback triggered when PM/AM is switched.\n   */\n\n  var handleToggleMeridian = useCallback(function (index) {\n    var nextCalendarDate = Array.from(calendarDate);\n    nextCalendarDate[index] = getReversedTimeMeridian(nextCalendarDate[index]);\n    setCalendarDate(nextCalendarDate); // If the value already exists, update the value again.\n\n    if (selectedDates.length === 2) {\n      var nextSelectedDates = Array.from(selectedDates);\n      nextSelectedDates[index] = getReversedTimeMeridian(nextSelectedDates[index]);\n      setSelectedDates(nextSelectedDates);\n    }\n  }, [calendarDate, selectedDates]);\n  /**\n   * Toolbar operation callback function\n   */\n\n  var handleShortcutPageDate = useCallback(function (value, closeOverlay, event) {\n    if (closeOverlay === void 0) {\n      closeOverlay = false;\n    }\n\n    updateCalendarDateRange({\n      dateRange: value\n    });\n\n    if (closeOverlay) {\n      handleValueUpdate(event, value, closeOverlay);\n    } else {\n      setSelectedDates(value !== null && value !== void 0 ? value : []);\n    } // End unfinished selections.\n\n\n    setSelectedIdle(true);\n  }, [handleValueUpdate, updateCalendarDateRange]);\n  var handleOK = useCallback(function (event) {\n    handleValueUpdate(event, selectedDates);\n    onOk === null || onOk === void 0 ? void 0 : onOk(selectedDates, event);\n  }, [handleValueUpdate, onOk, selectedDates]);\n  var handleClean = useCallback(function (event) {\n    updateCalendarDateRange({\n      dateRange: null\n    });\n    handleValueUpdate(event, null);\n  }, [handleValueUpdate, updateCalendarDateRange]);\n  /**\n   * Callback after the input box value is changed.\n   */\n\n  var handleInputChange = useCallback(function (value) {\n    setInputState('Typing');\n    var rangeValue = value.split(character); // isMatch('01/11/2020', 'MM/dd/yyyy') ==> true\n    // isMatch('2020-11-01', 'MM/dd/yyyy') ==> false\n\n    if (!DateUtils.isMatch(rangeValue[0], formatStr, {\n      locale: locale.dateLocale\n    }) || !DateUtils.isMatch(rangeValue[1], formatStr, {\n      locale: locale.dateLocale\n    })) {\n      setInputState('Error');\n      return;\n    }\n\n    var startDate = parseDate(rangeValue[0], formatStr);\n    var endDate = parseDate(rangeValue[1], formatStr);\n    var selectValue = [startDate, endDate];\n\n    if (!DateUtils.isValid(startDate) || !DateUtils.isValid(endDate)) {\n      setInputState('Error');\n      return;\n    }\n\n    if (isDateDisabled(startDate, selectValue, true, DATERANGE_DISABLED_TARGET.CALENDAR)) {\n      setInputState('Error');\n      return;\n    }\n\n    setHoverDateRange(selectValue);\n    setSelectedDates(selectValue);\n    updateCalendarDateRange({\n      dateRange: selectValue\n    });\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [character, rangeFormatStr, updateCalendarDateRange]);\n  /**\n   * The callback after the enter key is triggered on the input\n   */\n\n  var handleInputPressEnd = useCallback(function (event) {\n    if (inputState === 'Typing') {\n      handleValueUpdate(event, selectedDates.length === 2 ? selectedDates : null);\n    }\n\n    setInputState('Initial');\n  }, [handleValueUpdate, selectedDates, inputState]);\n  var handleEnter = useCallback(function () {\n    var nextCalendarDate;\n\n    if (value && value.length) {\n      var _startDate2 = value[0],\n          endData = value[1];\n      nextCalendarDate = [_startDate2, isSameMonth(_startDate2, endData) ? addMonths(endData, 1) : endData];\n    } else {\n      // Reset the date on the calendar to the default date\n      nextCalendarDate = getSafeCalendarDate({\n        value: defaultCalendarValue !== null && defaultCalendarValue !== void 0 ? defaultCalendarValue : null\n      });\n    }\n\n    setSelectedDates(value !== null && value !== void 0 ? value : []);\n    updateCalendarDateRange({\n      dateRange: nextCalendarDate\n    });\n  }, [defaultCalendarValue, updateCalendarDateRange, setSelectedDates, value]);\n  var handleEntered = useCallback(function () {\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setPickerToggleActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    setPickerToggleActive(false);\n    setSelectedIdle(true);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose]);\n  var isDateDisabled = useCallback(function (date, selectDate, selectedDone, target) {\n    if (typeof shouldDisableDate === 'function') {\n      return shouldDisableDate(date, selectDate, selectedDone, target);\n    }\n\n    if (typeof DEPRECATED_disabledDateProp === 'function') {\n      return DEPRECATED_disabledDateProp(date, selectDate, selectedDone, target);\n    }\n\n    return false;\n  }, [DEPRECATED_disabledDateProp, shouldDisableDate]);\n  var disabledByBetween = useCallback(function (start, end, type) {\n    // If the date is between the start and the end\n    // the button is disabled\n    while (DateUtils.isBefore(start, end) || DateUtils.isSameDay(start, end)) {\n      if (isDateDisabled(start, selectedDates, isSelectedIdle, type)) {\n        return true;\n      }\n\n      start = DateUtils.addDays(start, 1);\n    }\n\n    return false;\n  }, [isDateDisabled, isSelectedIdle, selectedDates]);\n  var disabledOkButton = useCallback(function () {\n    var start = selectedDates[0],\n        end = selectedDates[1];\n\n    if (!start || !end || !isSelectedIdle) {\n      return true;\n    }\n\n    return disabledByBetween(start, end, DATERANGE_DISABLED_TARGET.TOOLBAR_BUTTON_OK);\n  }, [disabledByBetween, isSelectedIdle, selectedDates]);\n  var disabledShortcutButton = useCallback(function (value) {\n    if (value === void 0) {\n      value = [];\n    }\n\n    var _value = value,\n        start = _value[0],\n        end = _value[1];\n\n    if (!start || !end) {\n      return true;\n    }\n\n    return disabledByBetween(start, end, DATERANGE_DISABLED_TARGET.TOOLBAR_SHORTCUT);\n  }, [disabledByBetween]);\n  var handleDisabledDate = useCallback(function (date, values, type) {\n    return isDateDisabled(date, values, isSelectedIdle, type);\n  }, [isDateDisabled, isSelectedIdle]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    active: isPickerToggleActive,\n    onExit: handleClean\n  }, rest));\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var classes = merge(className, menuClassName, prefix('daterange-menu'));\n    var panelClasses = prefix('daterange-panel', {\n      'daterange-panel-show-one-calendar': showOneCalendar\n    });\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var calendarProps = {\n      calendarDate: calendarDate,\n      disabledDate: handleDisabledDate,\n      format: formatStr,\n      hoverRangeValue: hoverDateRange !== null && hoverDateRange !== void 0 ? hoverDateRange : undefined,\n      isoWeek: isoWeek,\n      limitEndYear: limitEndYear,\n      limitStartYear: limitStartYear,\n      locale: locale,\n      showWeekNumbers: showWeekNumbers,\n      value: selectedDates,\n      showMeridian: showMeridian,\n      onChangeCalendarMonth: updateSingleCalendarMonth,\n      onChangeCalendarTime: updateSingleCalendarTime,\n      onMouseMove: handleMouseMove,\n      onSelect: handleSelectDate,\n      onToggleMeridian: handleToggleMeridian,\n      renderTitle: renderTitle\n    };\n    var sideRanges = (ranges === null || ranges === void 0 ? void 0 : ranges.filter(function (range) {\n      return (range === null || range === void 0 ? void 0 : range.placement) === 'left';\n    })) || [];\n    var bottomRanges = ranges === null || ranges === void 0 ? void 0 : ranges.filter(function (range) {\n      return (range === null || range === void 0 ? void 0 : range.placement) === 'bottom' || (range === null || range === void 0 ? void 0 : range.placement) === undefined;\n    });\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      role: \"dialog\",\n      className: classes,\n      ref: mergeRefs(overlayRef, speakerRef),\n      target: triggerRef,\n      style: styles\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: panelClasses\n    }, /*#__PURE__*/React.createElement(Stack, {\n      alignItems: \"flex-start\"\n    }, sideRanges.length > 0 && /*#__PURE__*/React.createElement(PredefinedRanges, {\n      direction: \"column\",\n      spacing: 0,\n      className: prefix('daterange-predefined'),\n      ranges: sideRanges,\n      calendarDate: calendarDate,\n      locale: locale,\n      disabledShortcut: disabledShortcutButton,\n      onClickShortcut: handleShortcutPageDate\n    }), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('daterange-content')\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('daterange-header')\n    }, getDisplayString(selectedDates)), /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix(\"daterange-calendar-\" + (showOneCalendar ? 'single' : 'group'))\n    }, /*#__PURE__*/React.createElement(DateRangePickerContext.Provider, {\n      value: {\n        isSelectedIdle: isSelectedIdle\n      }\n    }, /*#__PURE__*/React.createElement(Calendar, _extends({\n      index: 0\n    }, calendarProps)), !showOneCalendar && /*#__PURE__*/React.createElement(Calendar, _extends({\n      index: 1\n    }, calendarProps))))), /*#__PURE__*/React.createElement(Toolbar, {\n      locale: locale,\n      calendarDate: selectedDates,\n      disabledOkBtn: disabledOkButton,\n      disabledShortcut: disabledShortcutButton,\n      hideOkBtn: oneTap,\n      onOk: handleOK,\n      onClickShortcut: handleShortcutPageDate,\n      ranges: bottomRanges\n    })))));\n  };\n\n  var hasValue = !isNil(value) && value.length > 1;\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    classPrefix: classPrefix,\n    name: 'daterange',\n    appearance: appearance,\n    hasValue: hasValue,\n    cleanable: cleanable\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: createChainedFunction(handleEnter, onEnter),\n    onEntered: createChainedFunction(handleEntered, onEntered),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    ref: rootRef,\n    className: merge(className, classes, (_merge = {}, _merge[prefix('error')] = inputState === 'Error', _merge)),\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys, DateUtils.calendarOnlyProps)), {\n    as: toggleAs,\n    ref: targetRef,\n    appearance: appearance,\n    editable: editable,\n    inputMask: DateUtils.getDateMask(rangeFormatStr),\n    inputValue: value ? getDisplayString(value, true) : '',\n    inputPlaceholder: typeof placeholder === 'string' && placeholder ? placeholder : rangeFormatStr,\n    onInputChange: handleInputChange,\n    onInputBlur: handleInputPressEnd,\n    onInputPressEnter: handleInputPressEnd,\n    onKeyDown: onPickerKeyDown,\n    onClean: createChainedFunction(handleClean, onClean),\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: isPickerToggleActive,\n    placement: placement,\n    disabled: disabled,\n    caretAs: caretAs || IconCalendar\n  }), getDisplayString(value))));\n});\nDateRangePicker.after = disabledDateUtils.after;\nDateRangePicker.afterToday = disabledDateUtils.afterToday;\nDateRangePicker.allowedDays = disabledDateUtils.allowedDays;\nDateRangePicker.allowedMaxDays = disabledDateUtils.allowedMaxDays;\nDateRangePicker.allowedRange = disabledDateUtils.allowedRange;\nDateRangePicker.before = disabledDateUtils.before;\nDateRangePicker.beforeToday = disabledDateUtils.beforeToday;\nDateRangePicker.combine = disabledDateUtils.combine;\nDateRangePicker.displayName = 'DateRangePicker';\nDateRangePicker.propTypes = _extends({}, pickerPropTypes, {\n  ranges: PropTypes.array,\n  value: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultCalendarValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  hoverRange: PropTypes.oneOfType([PropTypes.oneOf(['week', 'month']), PropTypes.func]),\n  format: PropTypes.string,\n  isoWeek: PropTypes.bool,\n  oneTap: PropTypes.bool,\n  limitEndYear: PropTypes.number,\n  limitStartYear: PropTypes.number,\n  onChange: PropTypes.func,\n  onOk: PropTypes.func,\n  disabledDate: deprecatePropTypeNew(PropTypes.func, 'Use \"shouldDisableDate\" property instead.'),\n  shouldDisableDate: PropTypes.func,\n  onSelect: PropTypes.func,\n  showWeekNumbers: PropTypes.bool,\n  showMeridian: PropTypes.bool,\n  showOneCalendar: PropTypes.bool\n});\nexport default DateRangePicker;","map":{"version":3,"sources":["/Users/danilnagovicyn/Desktop/reactprojects/Incubator/Samurai_way/samurai-way/node_modules/rsuite/esm/DateRangePicker/DateRangePicker.js"],"names":["_extends","_objectWithoutPropertiesLoose","IconCalendar","isNil","omit","partial","pick","PropTypes","React","useCallback","useEffect","useRef","useState","FormattedDate","Toolbar","PredefinedRanges","Stack","omitTriggerPropKeys","PickerOverlay","pickerPropTypes","PickerToggle","PickerToggleTrigger","pickTriggerPropKeys","usePickerClassName","usePublicMethods","useToggleKeyDownEvent","createChainedFunction","DATERANGE_DISABLED_TARGET","DateUtils","mergeRefs","useClassNames","useControlled","useCustom","addMonths","compareAsc","isSameMonth","startOfDay","endOfDay","shouldRenderTime","isAfter","copyTime","reverseDateRangeOmitTime","getReversedTimeMeridian","Calendar","disabledDateUtils","getSafeCalendarDate","getMonthHoverRange","getWeekHoverRange","isSameRange","deprecatePropTypeNew","DateRangePickerContext","DateRangePicker","forwardRef","props","ref","_ref","_ref2","_merge","_props$as","as","Component","_props$classPrefix","classPrefix","className","_props$appearance","appearance","_props$editable","editable","_props$cleanable","cleanable","_props$character","character","defaultCalendarValue","defaultValue","disabled","DEPRECATED_disabledDateProp","disabledDate","shouldDisableDate","_props$format","format","formatStr","hoverRange","_props$isoWeek","isoWeek","_props$limitEndYear","limitEndYear","limitStartYear","overrideLocale","locale","menuClassName","menuStyle","oneTap","_props$placeholder","placeholder","_props$placement","placement","ranges","renderValue","_props$showOneCalenda","showOneCalendar","showWeekNumbers","showMeridian","style","toggleAs","caretAs","valueProp","value","onChange","onClean","onClose","onEnter","onEntered","onExited","onOk","onOpen","onSelect","renderTitle","rest","_useClassNames","merge","prefix","_useCustom","formatDate","parseDate","rangeFormatStr","_useControlled","setValue","_useState","isSelectedIdle","setSelectedIdle","_useState2","selectedDates","setSelectedDates","_useState3","hoverDateRange","setHoverDateRange","_useState4","calendarDate","setCalendarDate","_useState5","inputState","setInputState","selectRangeValueRef","getCalendarDatetime","calendarKey","index","updateCalendarDateRange","_ref3","dateRange","eventName","nextValue","length","_startDate","from","to","_endDate","_useState6","isPickerToggleActive","setPickerToggleActive","rootRef","overlayRef","targetRef","triggerRef","handleCloseDropdown","_triggerRef$current","_triggerRef$current$c","current","close","call","getDisplayString","isPlaintext","_nextValue$","_nextValue$2","startDate","endDate","displayValue","sort","createElement","Fragment","date","getHoverRangeValue","getHoverRangeFunc","hoverRangeFunc","hoverValues","isHoverRangeValid","Array","handleValueUpdate","event","closeOverlay","handleMouseMove","nextHoverDateRange","nextSelectedDates","isBefore","prevHoverValue","handleSelectDate","nextSelectDates","hoverRangeValue","noHoverRangeValid","selectValueLength","doneSelected","updateSingleCalendarMonth","nextCalendarDate","updateSingleCalendarTime","prev","next","concat","Date","valueOf","handleToggleMeridian","handleShortcutPageDate","handleOK","handleClean","handleInputChange","rangeValue","split","isMatch","dateLocale","selectValue","isValid","isDateDisabled","CALENDAR","handleInputPressEnd","handleEnter","_startDate2","endData","handleEntered","handleExited","selectDate","selectedDone","target","disabledByBetween","start","end","type","isSameDay","addDays","disabledOkButton","TOOLBAR_BUTTON_OK","disabledShortcutButton","_value","TOOLBAR_SHORTCUT","handleDisabledDate","values","onPickerKeyDown","active","onExit","renderDropdownMenu","positionProps","speakerRef","left","top","classes","panelClasses","styles","calendarProps","undefined","onChangeCalendarMonth","onChangeCalendarTime","onMouseMove","onToggleMeridian","sideRanges","filter","range","bottomRanges","role","alignItems","direction","spacing","disabledShortcut","onClickShortcut","Provider","disabledOkBtn","hideOkBtn","hasValue","_usePickerClassName","name","usedClassNamePropKeys","pickerProps","speaker","calendarOnlyProps","inputMask","getDateMask","inputValue","inputPlaceholder","onInputChange","onInputBlur","onInputPressEnter","onKeyDown","after","afterToday","allowedDays","allowedMaxDays","allowedRange","before","beforeToday","combine","displayName","propTypes","array","arrayOf","instanceOf","oneOfType","oneOf","func","string","bool","number"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport IconCalendar from '@rsuite/icons/legacy/Calendar';\nimport isNil from 'lodash/isNil';\nimport omit from 'lodash/omit';\nimport partial from 'lodash/partial';\nimport pick from 'lodash/pick';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { FormattedDate } from '../CustomProvider';\nimport Toolbar from '../DatePicker/Toolbar';\nimport PredefinedRanges from '../DatePicker/PredefinedRanges';\nimport Stack from '../Stack';\nimport { omitTriggerPropKeys, PickerOverlay, pickerPropTypes, PickerToggle, PickerToggleTrigger, pickTriggerPropKeys, usePickerClassName, usePublicMethods, useToggleKeyDownEvent } from '../Picker';\nimport { createChainedFunction, DATERANGE_DISABLED_TARGET, DateUtils, mergeRefs, useClassNames, useControlled, useCustom } from '../utils';\nimport { addMonths, compareAsc, isSameMonth, startOfDay, endOfDay, shouldRenderTime, isAfter, copyTime, reverseDateRangeOmitTime, getReversedTimeMeridian } from '../utils/dateUtils';\nimport Calendar from './Calendar';\nimport * as disabledDateUtils from './disabledDateUtils';\nimport { getSafeCalendarDate, getMonthHoverRange, getWeekHoverRange, isSameRange } from './utils';\nimport { deprecatePropTypeNew } from '../utils/deprecatePropType';\nimport DateRangePickerContext from './DateRangePickerContext';\nvar DateRangePicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _ref, _ref2, _merge;\n\n  var _props$as = props.as,\n      Component = _props$as === void 0 ? 'div' : _props$as,\n      _props$classPrefix = props.classPrefix,\n      classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n      className = props.className,\n      _props$appearance = props.appearance,\n      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n      _props$editable = props.editable,\n      editable = _props$editable === void 0 ? true : _props$editable,\n      _props$cleanable = props.cleanable,\n      cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n      _props$character = props.character,\n      character = _props$character === void 0 ? ' ~ ' : _props$character,\n      defaultCalendarValue = props.defaultCalendarValue,\n      defaultValue = props.defaultValue,\n      disabled = props.disabled,\n      DEPRECATED_disabledDateProp = props.disabledDate,\n      shouldDisableDate = props.shouldDisableDate,\n      _props$format = props.format,\n      formatStr = _props$format === void 0 ? 'yyyy-MM-dd' : _props$format,\n      hoverRange = props.hoverRange,\n      _props$isoWeek = props.isoWeek,\n      isoWeek = _props$isoWeek === void 0 ? false : _props$isoWeek,\n      _props$limitEndYear = props.limitEndYear,\n      limitEndYear = _props$limitEndYear === void 0 ? 1000 : _props$limitEndYear,\n      limitStartYear = props.limitStartYear,\n      overrideLocale = props.locale,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      oneTap = props.oneTap,\n      _props$placeholder = props.placeholder,\n      placeholder = _props$placeholder === void 0 ? '' : _props$placeholder,\n      _props$placement = props.placement,\n      placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n      ranges = props.ranges,\n      renderValue = props.renderValue,\n      _props$showOneCalenda = props.showOneCalendar,\n      showOneCalendar = _props$showOneCalenda === void 0 ? false : _props$showOneCalenda,\n      showWeekNumbers = props.showWeekNumbers,\n      showMeridian = props.showMeridian,\n      style = props.style,\n      toggleAs = props.toggleAs,\n      caretAs = props.caretAs,\n      valueProp = props.value,\n      onChange = props.onChange,\n      onClean = props.onClean,\n      onClose = props.onClose,\n      onEnter = props.onEnter,\n      onEntered = props.onEntered,\n      onExited = props.onExited,\n      onOk = props.onOk,\n      onOpen = props.onOpen,\n      onSelect = props.onSelect,\n      renderTitle = props.renderTitle,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"classPrefix\", \"className\", \"appearance\", \"editable\", \"cleanable\", \"character\", \"defaultCalendarValue\", \"defaultValue\", \"disabled\", \"disabledDate\", \"shouldDisableDate\", \"format\", \"hoverRange\", \"isoWeek\", \"limitEndYear\", \"limitStartYear\", \"locale\", \"menuClassName\", \"menuStyle\", \"oneTap\", \"placeholder\", \"placement\", \"ranges\", \"renderValue\", \"showOneCalendar\", \"showWeekNumbers\", \"showMeridian\", \"style\", \"toggleAs\", \"caretAs\", \"value\", \"onChange\", \"onClean\", \"onClose\", \"onEnter\", \"onEntered\", \"onExited\", \"onOk\", \"onOpen\", \"onSelect\", \"renderTitle\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      merge = _useClassNames.merge,\n      prefix = _useClassNames.prefix;\n\n  var _useCustom = useCustom('DateRangePicker', overrideLocale),\n      locale = _useCustom.locale,\n      formatDate = _useCustom.formatDate,\n      parseDate = _useCustom.parseDate;\n\n  var rangeFormatStr = \"\" + formatStr + character + formatStr;\n\n  var _useControlled = useControlled(valueProp, defaultValue !== null && defaultValue !== void 0 ? defaultValue : null),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n  /**\n   * Whether to complete the selection.\n   * Everytime selection will change this value. If the value is false, it means that the selection has not been completed.\n   *\n   * In `oneTap` mode, select action will not change this value, its value should be true always.\n   */\n\n\n  var _useState = useState(true),\n      isSelectedIdle = _useState[0],\n      setSelectedIdle = _useState[1];\n  /**\n   * The currently selected date range.\n   *\n   * The time range is selected by two clicks. After the first click,\n   * the cursor will store a temporary event date in the process until\n   * the second click to determine the end date of the date range.\n   *\n   */\n\n\n  var _useState2 = useState((_ref = valueProp !== null && valueProp !== void 0 ? valueProp : defaultValue) !== null && _ref !== void 0 ? _ref : []),\n      selectedDates = _useState2[0],\n      setSelectedDates = _useState2[1]; // The date of the current hover, used to reduce the calculation of `handleMouseMove`\n\n\n  var _useState3 = useState(null),\n      hoverDateRange = _useState3[0],\n      setHoverDateRange = _useState3[1]; // The displayed calendar panel is rendered based on this value.\n\n\n  var _useState4 = useState(getSafeCalendarDate({\n    value: (_ref2 = value !== null && value !== void 0 ? value : defaultCalendarValue) !== null && _ref2 !== void 0 ? _ref2 : null\n  })),\n      calendarDate = _useState4[0],\n      setCalendarDate = _useState4[1];\n\n  var _useState5 = useState(),\n      inputState = _useState5[0],\n      setInputState = _useState5[1];\n  /**\n   * When hoverRange is set, `selectValue` will be updated during the hover process,\n   * which will cause the `selectValue` to be updated after the first click,\n   * so declare a Ref to temporarily store the `selectValue` of the first click.\n   */\n\n\n  var selectRangeValueRef = useRef(null);\n  /**\n   * Get the time on the calendar.\n   */\n\n  var getCalendarDatetime = useCallback(function (calendarKey) {\n    var index = calendarKey === 'start' ? 0 : 1;\n    return (calendarDate === null || calendarDate === void 0 ? void 0 : calendarDate[index]) || (defaultCalendarValue === null || defaultCalendarValue === void 0 ? void 0 : defaultCalendarValue[index]);\n  }, [calendarDate, defaultCalendarValue]);\n  /**\n   * Call this function to update the calendar panel rendering benchmark value.\n   * If params `value` is not passed, it defaults to [new Date(), addMonth(new Date(), 1)].\n   */\n\n  var updateCalendarDateRange = useCallback(function (_ref3) {\n    var dateRange = _ref3.dateRange,\n        calendarKey = _ref3.calendarKey,\n        eventName = _ref3.eventName;\n    var nextValue = dateRange; // The time should remain the same when the dates in the date range are changed.\n\n    if (shouldRenderTime(formatStr) && dateRange !== null && dateRange !== void 0 && dateRange.length && eventName !== 'changeTime') {\n      var _startDate = copyTime({\n        from: getCalendarDatetime('start'),\n        to: dateRange[0]\n      });\n\n      var _endDate = copyTime({\n        from: getCalendarDatetime('end'),\n        to: dateRange.length === 1 ? addMonths(_startDate, 1) : dateRange[1]\n      });\n\n      nextValue = [_startDate, _endDate];\n    } else if (dateRange === null && typeof defaultCalendarValue !== 'undefined') {\n      // Make the calendar render the value of defaultCalendarValue after clearing the value.\n      nextValue = defaultCalendarValue;\n    }\n\n    setCalendarDate(getSafeCalendarDate({\n      value: nextValue,\n      calendarKey: calendarKey\n    }));\n  }, [formatStr, defaultCalendarValue, getCalendarDatetime]); // if valueProp changed then update selectValue/hoverValue\n\n  useEffect(function () {\n    setSelectedDates(valueProp !== null && valueProp !== void 0 ? valueProp : []);\n    setHoverDateRange(valueProp !== null && valueProp !== void 0 ? valueProp : null);\n  }, [valueProp]);\n\n  var _useState6 = useState(false),\n      isPickerToggleActive = _useState6[0],\n      setPickerToggleActive = _useState6[1];\n\n  var rootRef = useRef(null);\n  var overlayRef = useRef(null);\n  var targetRef = useRef(null);\n  var triggerRef = useRef(null);\n  var handleCloseDropdown = useCallback(function () {\n    var _triggerRef$current, _triggerRef$current$c;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n  }, []);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef,\n    rootRef: rootRef\n  });\n  var getDisplayString = useCallback(function (nextValue, isPlaintext) {\n    var _nextValue$, _nextValue$2;\n\n    var startDate = (_nextValue$ = nextValue === null || nextValue === void 0 ? void 0 : nextValue[0]) !== null && _nextValue$ !== void 0 ? _nextValue$ : null;\n    var endDate = (_nextValue$2 = nextValue === null || nextValue === void 0 ? void 0 : nextValue[1]) !== null && _nextValue$2 !== void 0 ? _nextValue$2 : null;\n\n    if (startDate && endDate) {\n      var displayValue = [startDate, endDate].sort(compareAsc);\n\n      if (isPlaintext) {\n        return formatDate(displayValue[0], formatStr) + character + formatDate(displayValue[1], formatStr);\n      }\n\n      return renderValue ? renderValue(displayValue, formatStr) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FormattedDate, {\n        date: displayValue[0],\n        formatStr: formatStr\n      }), character, /*#__PURE__*/React.createElement(FormattedDate, {\n        date: displayValue[1],\n        formatStr: formatStr\n      }));\n    }\n\n    return isPlaintext ? '' : placeholder || rangeFormatStr;\n  }, [character, formatDate, formatStr, placeholder, rangeFormatStr, renderValue]);\n  /**\n   * preset hover range\n   */\n\n  var getHoverRangeValue = useCallback(function (date) {\n    function getHoverRangeFunc() {\n      if (hoverRange === 'week') {\n        return partial(getWeekHoverRange, isoWeek);\n      } else if (hoverRange === 'month') {\n        return getMonthHoverRange;\n      }\n\n      return hoverRange;\n    }\n\n    var hoverRangeFunc = getHoverRangeFunc();\n\n    if (isNil(hoverRangeFunc)) {\n      return null;\n    }\n\n    var hoverValues = hoverRangeFunc(date);\n    var isHoverRangeValid = hoverValues instanceof Array && hoverValues.length === 2;\n\n    if (!isHoverRangeValid) {\n      return null;\n    }\n\n    if (isAfter(hoverValues[0], hoverValues[1])) {\n      hoverValues = reverseDateRangeOmitTime(hoverValues);\n    }\n\n    return hoverValues;\n  }, [hoverRange, isoWeek]);\n  var handleValueUpdate = useCallback(function (event, nextValue, closeOverlay) {\n    if (closeOverlay === void 0) {\n      closeOverlay = true;\n    }\n\n    // If nextValue is null, it means that the user is erasing the selected dates.\n    setSelectedDates(nextValue !== null && nextValue !== void 0 ? nextValue : []);\n\n    if (!isSameRange(nextValue, value, formatStr)) {\n      setValue(nextValue);\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    } // `closeOverlay` default value is `true`\n\n\n    if (closeOverlay !== false) {\n      handleCloseDropdown();\n    }\n  }, [formatStr, handleCloseDropdown, onChange, setValue, value]);\n  /**\n   * Select the date range. If oneTap is not set, you need to click twice to select the start time and end time.\n   * The MouseMove event is called between the first click and the second click to update the selection state.\n   */\n\n  var handleMouseMove = useCallback(function (date) {\n    var nextHoverDateRange = getHoverRangeValue(date); // If hasDoneSelect is false,\n    // it means there's already one selected date\n    // and waiting for user to select the second date to complete the selection.\n\n    if (!isSelectedIdle) {\n      // If `hoverRange` is set, you need to change the value of hoverDateRange according to the rules\n      if (!isNil(nextHoverDateRange) && !isNil(selectRangeValueRef.current)) {\n        var nextSelectedDates = [selectRangeValueRef.current[0], nextHoverDateRange[1]];\n\n        if (DateUtils.isBefore(nextHoverDateRange[0], selectRangeValueRef.current[0])) {\n          nextSelectedDates = [nextHoverDateRange[0], selectRangeValueRef.current[1]];\n        }\n\n        setSelectedDates(nextSelectedDates);\n      } else {\n        setHoverDateRange(function (prevHoverValue) {\n          return isNil(prevHoverValue) ? null : [prevHoverValue[0], date];\n        });\n      } // Before the first click, if nextHoverDateRange has a value, hoverDateRange needs to be updated\n\n    } else if (!isNil(nextHoverDateRange)) {\n      setHoverDateRange(nextHoverDateRange);\n    }\n  }, [getHoverRangeValue, isSelectedIdle]);\n  /**\n   * Callback for selecting a date cell in the calendar grid\n   */\n\n  var handleSelectDate = useCallback(function (index, date, event) {\n    var calendarKey = index === 0 ? 'start' : 'end';\n    var nextSelectDates = hoverDateRange !== null && hoverDateRange !== void 0 ? hoverDateRange : [];\n    var hoverRangeValue = getHoverRangeValue(date);\n    var noHoverRangeValid = isNil(hoverRangeValue); // in `oneTap` mode\n\n    if (isSelectedIdle && oneTap) {\n      handleValueUpdate(event, noHoverRangeValid ? [startOfDay(date), endOfDay(date)] : hoverRangeValue);\n      setSelectedIdle(false);\n      return;\n    } // no preset hover range can use\n\n\n    if (noHoverRangeValid) {\n      // start select\n      if (isSelectedIdle) {\n        nextSelectDates = [date];\n      } else {\n        // finish select\n        nextSelectDates[1] = date;\n      }\n    } else {\n      if (!isSelectedIdle) {\n        nextSelectDates = selectedDates;\n        selectRangeValueRef.current = null;\n      } else {\n        nextSelectDates = hoverRangeValue;\n        selectRangeValueRef.current = hoverRangeValue;\n      }\n    }\n\n    if (nextSelectDates.length === 2) {\n      // If user have completed the selection, then sort the selected dates.\n      if (isAfter(nextSelectDates[0], nextSelectDates[1])) {\n        nextSelectDates = reverseDateRangeOmitTime(nextSelectDates);\n      }\n\n      if (shouldRenderTime(formatStr)) {\n        nextSelectDates = [copyTime({\n          from: getCalendarDatetime('start'),\n          to: nextSelectDates[0]\n        }), copyTime({\n          from: getCalendarDatetime('end'),\n          to: nextSelectDates[1]\n        })];\n      }\n\n      setHoverDateRange(nextSelectDates);\n    } else {\n      setHoverDateRange([nextSelectDates[0], nextSelectDates[0]]);\n    }\n\n    setSelectedDates(nextSelectDates);\n    updateCalendarDateRange({\n      dateRange: nextSelectDates,\n      calendarKey: calendarKey,\n      eventName: 'changeDate'\n    });\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(date, event);\n    setSelectedIdle(!isSelectedIdle);\n  }, [formatStr, getCalendarDatetime, getHoverRangeValue, handleValueUpdate, hoverDateRange, isSelectedIdle, onSelect, oneTap, selectedDates, updateCalendarDateRange]);\n  /**\n   * If `selectValue` changed, there will be the following effects.\n   * 1. Check if the selection is completed.\n   * 2. if the selection is completed, set the temporary `hoverValue` empty.\n   */\n\n  useEffect(function () {\n    var selectValueLength = selectedDates.length;\n    var doneSelected = selectValueLength === 0 || selectValueLength === 2;\n    doneSelected && setHoverDateRange(null);\n  }, [selectedDates]);\n  var updateSingleCalendarMonth = useCallback(function (index, date) {\n    var calendarKey = index === 0 ? 'start' : 'end';\n    var nextCalendarDate = Array.from(calendarDate);\n    nextCalendarDate[index] = date;\n    updateCalendarDateRange({\n      dateRange: nextCalendarDate,\n      calendarKey: calendarKey,\n      eventName: 'changeMonth'\n    });\n  }, [calendarDate, updateCalendarDateRange]);\n  var updateSingleCalendarTime = useCallback(function (index, date) {\n    var calendarKey = index === 0 ? 'start' : 'end';\n    var nextCalendarDate = Array.from(calendarDate);\n    nextCalendarDate[index] = date;\n    updateCalendarDateRange({\n      dateRange: nextCalendarDate,\n      calendarKey: calendarKey,\n      eventName: 'changeTime'\n    });\n    setSelectedDates(function (prev) {\n      var next = [].concat(prev); // if next[index] is not empty, only update the time after aligning the year, month and day\n\n      next[index] = next[index] ? copyTime({\n        from: date,\n        to: next[index]\n      }) : new Date(date.valueOf());\n      return next;\n    });\n  }, [calendarDate, updateCalendarDateRange]);\n  /**\n   * The callback triggered when PM/AM is switched.\n   */\n\n  var handleToggleMeridian = useCallback(function (index) {\n    var nextCalendarDate = Array.from(calendarDate);\n    nextCalendarDate[index] = getReversedTimeMeridian(nextCalendarDate[index]);\n    setCalendarDate(nextCalendarDate); // If the value already exists, update the value again.\n\n    if (selectedDates.length === 2) {\n      var nextSelectedDates = Array.from(selectedDates);\n      nextSelectedDates[index] = getReversedTimeMeridian(nextSelectedDates[index]);\n      setSelectedDates(nextSelectedDates);\n    }\n  }, [calendarDate, selectedDates]);\n  /**\n   * Toolbar operation callback function\n   */\n\n  var handleShortcutPageDate = useCallback(function (value, closeOverlay, event) {\n    if (closeOverlay === void 0) {\n      closeOverlay = false;\n    }\n\n    updateCalendarDateRange({\n      dateRange: value\n    });\n\n    if (closeOverlay) {\n      handleValueUpdate(event, value, closeOverlay);\n    } else {\n      setSelectedDates(value !== null && value !== void 0 ? value : []);\n    } // End unfinished selections.\n\n\n    setSelectedIdle(true);\n  }, [handleValueUpdate, updateCalendarDateRange]);\n  var handleOK = useCallback(function (event) {\n    handleValueUpdate(event, selectedDates);\n    onOk === null || onOk === void 0 ? void 0 : onOk(selectedDates, event);\n  }, [handleValueUpdate, onOk, selectedDates]);\n  var handleClean = useCallback(function (event) {\n    updateCalendarDateRange({\n      dateRange: null\n    });\n    handleValueUpdate(event, null);\n  }, [handleValueUpdate, updateCalendarDateRange]);\n  /**\n   * Callback after the input box value is changed.\n   */\n\n  var handleInputChange = useCallback(function (value) {\n    setInputState('Typing');\n    var rangeValue = value.split(character); // isMatch('01/11/2020', 'MM/dd/yyyy') ==> true\n    // isMatch('2020-11-01', 'MM/dd/yyyy') ==> false\n\n    if (!DateUtils.isMatch(rangeValue[0], formatStr, {\n      locale: locale.dateLocale\n    }) || !DateUtils.isMatch(rangeValue[1], formatStr, {\n      locale: locale.dateLocale\n    })) {\n      setInputState('Error');\n      return;\n    }\n\n    var startDate = parseDate(rangeValue[0], formatStr);\n    var endDate = parseDate(rangeValue[1], formatStr);\n    var selectValue = [startDate, endDate];\n\n    if (!DateUtils.isValid(startDate) || !DateUtils.isValid(endDate)) {\n      setInputState('Error');\n      return;\n    }\n\n    if (isDateDisabled(startDate, selectValue, true, DATERANGE_DISABLED_TARGET.CALENDAR)) {\n      setInputState('Error');\n      return;\n    }\n\n    setHoverDateRange(selectValue);\n    setSelectedDates(selectValue);\n    updateCalendarDateRange({\n      dateRange: selectValue\n    });\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [character, rangeFormatStr, updateCalendarDateRange]);\n  /**\n   * The callback after the enter key is triggered on the input\n   */\n\n  var handleInputPressEnd = useCallback(function (event) {\n    if (inputState === 'Typing') {\n      handleValueUpdate(event, selectedDates.length === 2 ? selectedDates : null);\n    }\n\n    setInputState('Initial');\n  }, [handleValueUpdate, selectedDates, inputState]);\n  var handleEnter = useCallback(function () {\n    var nextCalendarDate;\n\n    if (value && value.length) {\n      var _startDate2 = value[0],\n          endData = value[1];\n      nextCalendarDate = [_startDate2, isSameMonth(_startDate2, endData) ? addMonths(endData, 1) : endData];\n    } else {\n      // Reset the date on the calendar to the default date\n      nextCalendarDate = getSafeCalendarDate({\n        value: defaultCalendarValue !== null && defaultCalendarValue !== void 0 ? defaultCalendarValue : null\n      });\n    }\n\n    setSelectedDates(value !== null && value !== void 0 ? value : []);\n    updateCalendarDateRange({\n      dateRange: nextCalendarDate\n    });\n  }, [defaultCalendarValue, updateCalendarDateRange, setSelectedDates, value]);\n  var handleEntered = useCallback(function () {\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setPickerToggleActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    setPickerToggleActive(false);\n    setSelectedIdle(true);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose]);\n  var isDateDisabled = useCallback(function (date, selectDate, selectedDone, target) {\n    if (typeof shouldDisableDate === 'function') {\n      return shouldDisableDate(date, selectDate, selectedDone, target);\n    }\n\n    if (typeof DEPRECATED_disabledDateProp === 'function') {\n      return DEPRECATED_disabledDateProp(date, selectDate, selectedDone, target);\n    }\n\n    return false;\n  }, [DEPRECATED_disabledDateProp, shouldDisableDate]);\n  var disabledByBetween = useCallback(function (start, end, type) {\n    // If the date is between the start and the end\n    // the button is disabled\n    while (DateUtils.isBefore(start, end) || DateUtils.isSameDay(start, end)) {\n      if (isDateDisabled(start, selectedDates, isSelectedIdle, type)) {\n        return true;\n      }\n\n      start = DateUtils.addDays(start, 1);\n    }\n\n    return false;\n  }, [isDateDisabled, isSelectedIdle, selectedDates]);\n  var disabledOkButton = useCallback(function () {\n    var start = selectedDates[0],\n        end = selectedDates[1];\n\n    if (!start || !end || !isSelectedIdle) {\n      return true;\n    }\n\n    return disabledByBetween(start, end, DATERANGE_DISABLED_TARGET.TOOLBAR_BUTTON_OK);\n  }, [disabledByBetween, isSelectedIdle, selectedDates]);\n  var disabledShortcutButton = useCallback(function (value) {\n    if (value === void 0) {\n      value = [];\n    }\n\n    var _value = value,\n        start = _value[0],\n        end = _value[1];\n\n    if (!start || !end) {\n      return true;\n    }\n\n    return disabledByBetween(start, end, DATERANGE_DISABLED_TARGET.TOOLBAR_SHORTCUT);\n  }, [disabledByBetween]);\n  var handleDisabledDate = useCallback(function (date, values, type) {\n    return isDateDisabled(date, values, isSelectedIdle, type);\n  }, [isDateDisabled, isSelectedIdle]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    active: isPickerToggleActive,\n    onExit: handleClean\n  }, rest));\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var classes = merge(className, menuClassName, prefix('daterange-menu'));\n    var panelClasses = prefix('daterange-panel', {\n      'daterange-panel-show-one-calendar': showOneCalendar\n    });\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var calendarProps = {\n      calendarDate: calendarDate,\n      disabledDate: handleDisabledDate,\n      format: formatStr,\n      hoverRangeValue: hoverDateRange !== null && hoverDateRange !== void 0 ? hoverDateRange : undefined,\n      isoWeek: isoWeek,\n      limitEndYear: limitEndYear,\n      limitStartYear: limitStartYear,\n      locale: locale,\n      showWeekNumbers: showWeekNumbers,\n      value: selectedDates,\n      showMeridian: showMeridian,\n      onChangeCalendarMonth: updateSingleCalendarMonth,\n      onChangeCalendarTime: updateSingleCalendarTime,\n      onMouseMove: handleMouseMove,\n      onSelect: handleSelectDate,\n      onToggleMeridian: handleToggleMeridian,\n      renderTitle: renderTitle\n    };\n    var sideRanges = (ranges === null || ranges === void 0 ? void 0 : ranges.filter(function (range) {\n      return (range === null || range === void 0 ? void 0 : range.placement) === 'left';\n    })) || [];\n    var bottomRanges = ranges === null || ranges === void 0 ? void 0 : ranges.filter(function (range) {\n      return (range === null || range === void 0 ? void 0 : range.placement) === 'bottom' || (range === null || range === void 0 ? void 0 : range.placement) === undefined;\n    });\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      role: \"dialog\",\n      className: classes,\n      ref: mergeRefs(overlayRef, speakerRef),\n      target: triggerRef,\n      style: styles\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: panelClasses\n    }, /*#__PURE__*/React.createElement(Stack, {\n      alignItems: \"flex-start\"\n    }, sideRanges.length > 0 && /*#__PURE__*/React.createElement(PredefinedRanges, {\n      direction: \"column\",\n      spacing: 0,\n      className: prefix('daterange-predefined'),\n      ranges: sideRanges,\n      calendarDate: calendarDate,\n      locale: locale,\n      disabledShortcut: disabledShortcutButton,\n      onClickShortcut: handleShortcutPageDate\n    }), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('daterange-content')\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('daterange-header')\n    }, getDisplayString(selectedDates)), /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix(\"daterange-calendar-\" + (showOneCalendar ? 'single' : 'group'))\n    }, /*#__PURE__*/React.createElement(DateRangePickerContext.Provider, {\n      value: {\n        isSelectedIdle: isSelectedIdle\n      }\n    }, /*#__PURE__*/React.createElement(Calendar, _extends({\n      index: 0\n    }, calendarProps)), !showOneCalendar && /*#__PURE__*/React.createElement(Calendar, _extends({\n      index: 1\n    }, calendarProps))))), /*#__PURE__*/React.createElement(Toolbar, {\n      locale: locale,\n      calendarDate: selectedDates,\n      disabledOkBtn: disabledOkButton,\n      disabledShortcut: disabledShortcutButton,\n      hideOkBtn: oneTap,\n      onOk: handleOK,\n      onClickShortcut: handleShortcutPageDate,\n      ranges: bottomRanges\n    })))));\n  };\n\n  var hasValue = !isNil(value) && value.length > 1;\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    classPrefix: classPrefix,\n    name: 'daterange',\n    appearance: appearance,\n    hasValue: hasValue,\n    cleanable: cleanable\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: createChainedFunction(handleEnter, onEnter),\n    onEntered: createChainedFunction(handleEntered, onEntered),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    ref: rootRef,\n    className: merge(className, classes, (_merge = {}, _merge[prefix('error')] = inputState === 'Error', _merge)),\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys, DateUtils.calendarOnlyProps)), {\n    as: toggleAs,\n    ref: targetRef,\n    appearance: appearance,\n    editable: editable,\n    inputMask: DateUtils.getDateMask(rangeFormatStr),\n    inputValue: value ? getDisplayString(value, true) : '',\n    inputPlaceholder: typeof placeholder === 'string' && placeholder ? placeholder : rangeFormatStr,\n    onInputChange: handleInputChange,\n    onInputBlur: handleInputPressEnd,\n    onInputPressEnter: handleInputPressEnd,\n    onKeyDown: onPickerKeyDown,\n    onClean: createChainedFunction(handleClean, onClean),\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: isPickerToggleActive,\n    placement: placement,\n    disabled: disabled,\n    caretAs: caretAs || IconCalendar\n  }), getDisplayString(value))));\n});\nDateRangePicker.after = disabledDateUtils.after;\nDateRangePicker.afterToday = disabledDateUtils.afterToday;\nDateRangePicker.allowedDays = disabledDateUtils.allowedDays;\nDateRangePicker.allowedMaxDays = disabledDateUtils.allowedMaxDays;\nDateRangePicker.allowedRange = disabledDateUtils.allowedRange;\nDateRangePicker.before = disabledDateUtils.before;\nDateRangePicker.beforeToday = disabledDateUtils.beforeToday;\nDateRangePicker.combine = disabledDateUtils.combine;\nDateRangePicker.displayName = 'DateRangePicker';\nDateRangePicker.propTypes = _extends({}, pickerPropTypes, {\n  ranges: PropTypes.array,\n  value: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultCalendarValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  hoverRange: PropTypes.oneOfType([PropTypes.oneOf(['week', 'month']), PropTypes.func]),\n  format: PropTypes.string,\n  isoWeek: PropTypes.bool,\n  oneTap: PropTypes.bool,\n  limitEndYear: PropTypes.number,\n  limitStartYear: PropTypes.number,\n  onChange: PropTypes.func,\n  onOk: PropTypes.func,\n  disabledDate: deprecatePropTypeNew(PropTypes.func, 'Use \"shouldDisableDate\" property instead.'),\n  shouldDisableDate: PropTypes.func,\n  onSelect: PropTypes.func,\n  showWeekNumbers: PropTypes.bool,\n  showMeridian: PropTypes.bool,\n  showOneCalendar: PropTypes.bool\n});\nexport default DateRangePicker;"]},"metadata":{},"sourceType":"module"}