{"ast":null,"code":"import { postsAPI } from \"../../api/postsAPI\";\nconst initialState = [];\nexport const feedReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"feedPage/setPosts\":\n      return [...state, ...action.data];\n\n    case \"feedPage/setImage\":\n      const foundedPost = state.findIndex(post => post.id === action.postId);\n      return [...state, state[foundedPost].image = action.image];\n\n    default:\n      return state;\n  }\n};\nexport const setPostsAC = data => {\n  return {\n    type: \"feedPage/setPosts\",\n    data\n  };\n};\nexport const setImageAC = (image, postId) => {\n  return {\n    type: \"feedPage/setImage\",\n    image,\n    postId\n  };\n};\nexport const getPostsTC = () => dispatch => {\n  postsAPI.getPosts().then(res => {\n    dispatch(setPostsAC(res.data));\n  });\n};\nexport const getImageTC = postId => dispatch => {\n  debugger;\n  postsAPI.getImages().then(res => {\n    dispatch(setImageAC(res.data, postId));\n  });\n};","map":{"version":3,"sources":["/Users/danilnagovicyn/Desktop/reactprojects/Incubator/Samurai_way/samurai-way/src/store/reducers/feedReducer.ts"],"names":["postsAPI","initialState","feedReducer","state","action","type","data","foundedPost","findIndex","post","id","postId","image","setPostsAC","setImageAC","getPostsTC","dispatch","getPosts","then","res","getImageTC","getImages"],"mappings":"AACA,SAASA,QAAT,QAAyB,oBAAzB;AAEA,MAAMC,YAA+B,GAAG,EAAxC;AAEA,OAAO,MAAMC,WAAW,GAAG,YAA8C;AAAA,MAA7CC,KAA6C,uEAArCF,YAAqC;AAAA,MAAvBG,MAAuB;;AACvE,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,mBAAL;AACE,aAAO,CAAC,GAAGF,KAAJ,EAAW,GAAGC,MAAM,CAACE,IAArB,CAAP;;AACF,SAAK,mBAAL;AACE,YAAMC,WAAW,GAAGJ,KAAK,CAACK,SAAN,CAAiBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYN,MAAM,CAACO,MAA7C,CAApB;AACA,aAAO,CAAC,GAAGR,KAAJ,EAAWA,KAAK,CAACI,WAAD,CAAL,CAAmBK,KAAnB,GAA2BR,MAAM,CAACQ,KAA7C,CAAP;;AACF;AACE,aAAOT,KAAP;AAPJ;AASD,CAVM;AAYP,OAAO,MAAMU,UAAU,GAAIP,IAAD,IAAsB;AAC9C,SAAO;AAAED,IAAAA,IAAI,EAAE,mBAAR;AAA6BC,IAAAA;AAA7B,GAAP;AACD,CAFM;AAGP,OAAO,MAAMQ,UAAU,GAAG,CAACF,KAAD,EAAgBD,MAAhB,KAAmC;AAC3D,SAAO;AAAEN,IAAAA,IAAI,EAAE,mBAAR;AAA6BO,IAAAA,KAA7B;AAAoCD,IAAAA;AAApC,GAAP;AACD,CAFM;AAIP,OAAO,MAAMI,UAAU,GAAG,MAAOC,QAAD,IAAwB;AACtDhB,EAAAA,QAAQ,CAACiB,QAAT,GAAoBC,IAApB,CAA0BC,GAAD,IAAS;AAChCH,IAAAA,QAAQ,CAACH,UAAU,CAACM,GAAG,CAACb,IAAL,CAAX,CAAR;AACD,GAFD;AAGD,CAJM;AAKP,OAAO,MAAMc,UAAU,GAAIT,MAAD,IAAqBK,QAAD,IAAwB;AAClE;AACFhB,EAAAA,QAAQ,CAACqB,SAAT,GAAqBH,IAArB,CAA2BC,GAAD,IAAS;AACjCH,IAAAA,QAAQ,CAACF,UAAU,CAACK,GAAG,CAACb,IAAL,EAAWK,MAAX,CAAX,CAAR;AACD,GAFD;AAGD,CALM","sourcesContent":["import { Dispatch } from \"redux\";\nimport { postsAPI } from \"../../api/postsAPI\";\n\nconst initialState: FeedPageStateType = [];\n\nexport const feedReducer = (state = initialState, action: ActionType) => {\n  switch (action.type) {\n    case \"feedPage/setPosts\":\n      return [...state, ...action.data];\n    case \"feedPage/setImage\":\n      const foundedPost = state.findIndex((post) => post.id === action.postId);\n      return [...state, state[foundedPost].image = action.image];\n    default:\n      return state;\n  }\n};\n\nexport const setPostsAC = (data: PostType[]) => {\n  return { type: \"feedPage/setPosts\", data } as const;\n};\nexport const setImageAC = (image: string, postId: number) => {\n  return { type: \"feedPage/setImage\", image, postId } as const;\n};\n\nexport const getPostsTC = () => (dispatch: Dispatch) => {\n  postsAPI.getPosts().then((res) => {\n    dispatch(setPostsAC(res.data));\n  });\n};\nexport const getImageTC = (postId: number) => (dispatch: Dispatch) => {\n    debugger\n  postsAPI.getImages().then((res) => {\n    dispatch(setImageAC(res.data, postId));\n  });\n};\n\ntype ActionType = ReturnType<typeof setPostsAC> | ReturnType<typeof setImageAC>;\n\ntype FeedPageStateType = PostType[];\n\nexport type PostType = {\n  userId: number;\n  id: number;\n  title: string;\n  body: string;\n  image: string;\n};\n"]},"metadata":{},"sourceType":"module"}